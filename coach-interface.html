<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KI-Coaching Cockpit - Coach Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            height: calc(100vh - 40px);
        }

        .sidebar {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow-y: auto;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
        }

        h1 {
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 24px;
            text-align: center;
        }

        h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .phase-selector {
            margin-bottom: 25px;
        }

        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        select:focus {
            outline: none;
            border-color: #667eea;
        }

        .instructions-panel {
            background: #f7fafc;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
            max-height: 400px;
            overflow-y: auto;
        }

        .instructions-panel h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: bold;
        }

        .coach-action {
            background: #e8f4fd;
            border: 1px solid #bee3f8;
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
            font-style: italic;
            color: #2c5aa0;
            line-height: 1.5;
        }

        .gpt-prompt {
            background: #f0f4f8;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            line-height: 1.6;
            color: #2d3748;
            white-space: pre-wrap;
        }

        .gpt-prompt strong {
            color: #1a202c;
            display: block;
            margin-bottom: 8px;
            font-family: 'Segoe UI', sans-serif;
        }

        .instructions-panel p {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
        }

        .chat-header {
            background: #667eea;
            color: white;
            padding: 15px;
            font-weight: bold;
            text-align: center;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
            min-height: 300px;
        }

        .message {
            margin-bottom: 15px;
            padding: 12px 16px;
            border-radius: 10px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .message.coach {
            background: #667eea;
            color: white;
            margin-left: auto;
            text-align: right;
        }

        .message.klient {
            background: #e2e8f0;
            color: #2d3748;
        }

        .message.system {
            background: #f0f4f8;
            color: #4a5568;
            font-style: italic;
            text-align: center;
            max-width: 100%;
            border: 1px dashed #cbd5e0;
        }

        .chat-input-container {
            padding: 15px;
            background: white;
            border-top: 1px solid #e2e8f0;
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            resize: none;
            min-height: 40px;
            max-height: 120px;
        }

        .chat-input:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        button:hover {
            background: #5a67d8;
        }

        button:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }

        .sender-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            background: #f7fafc;
            padding: 15px;
            border-radius: 8px;
        }

        .sender-toggle label {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .sender-toggle input[type="radio"] {
            margin: 0;
        }

        .status-indicator {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }

        .status-connected {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-error {
            background: #fed7d7;
            color: #742a2a;
        }

        .welcome-message {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .welcome-message h2 {
            color: white;
            margin-bottom: 10px;
        }

        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr;
            }
            
            .sidebar {
                height: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h1>üéØ Coach Cockpit</h1>
            
            <div class="welcome-message">
                <h2>Professionelles KI-Coaching System</h2>
                <p>8-Phasen-Methodik mit strukturierten Arbeitsschritten und GPT-Integration.</p>
            </div>

            <div class="phase-selector">
                <h2>Coaching Phase</h2>
                <select id="phaseSelect">
                    <option value="1">Phase 1: Erste Erfassung der Soll-Ist-Situation</option>
                    <option value="2">Phase 2: Vertiefte Erfassung des ‚ÄûSchl√ºsselaffekts"</option>
                    <option value="3">Phase 3: Vertiefte Erfassung des Coachingziels</option>
                    <option value="4">Phase 4: Rekonstruktion des ‚ÄûTeufelskreislaufs"</option>
                    <option value="5">Phase 5: Rekonstruktion der Ausbalancierungsprobleme</option>
                    <option value="6">Phase 6: Entwicklung einer Erfolgsimagination</option>
                    <option value="7">Phase 7: Identifikation zielf√ºhrender Aktivit√§ten</option>
                    <option value="8">Phase 8: Umsetzungsunterst√ºtzung</option>
                </select>
            </div>

            <div class="instructions-panel" id="instructionsPanel">
                <h3>Phase 1: Erste Erfassung der Soll-Ist-Situation</h3>
                
                <div class="coach-action">Coach begr√º√üt Coachingpartner, macht etwas Small Talk und teilt dann den Bildschirm, um Coachee das Konzept und Verfahren des KI-Coachings vorzustellen. Coach achtet dabei insbesondere auf den Aufbau einer positiven Arbeitsbeziehung.</div>
                
                <div class="coach-action">Coach regt Coachee an zu erz√§hlen, wie die aktuell unbefriedigende IST-Situation ist und wie er/sie sich die SOLL-Situation vorstellt. Coach beschr√§nkt sich dabei auf aktives Zuh√∂ren.</div>
                
                <p><strong>Protokoll-Template:</strong><br>
                "Ich habe folgendes Problem bzw. Coachingziel: [Coach fasst die Beschreibung der Ist- und Soll-Situation schriftlich zusammen. Fokus auf ‚ÄûSchl√ºsselsituation" und ‚ÄûSchl√ºsselaffekt".]"</p>

                <div class="gpt-prompt"><strong>GPT-Prompt f√ºr Phase 1:</strong>Erstelle einen in Ich-Form geschriebenen ‚Äûstrukturierten Bericht meiner Coachingproblematik", in dem alle obigen Informationen zusammengefasst sind. Gliedere diesen Bericht in zwei Teile: zun√§chst die IST-Situation und dann die gew√ºnschte SOLL-Situation.

Nimm in jedem der beiden Teile Bezug auf:
‚Ä¢ √§u√üere Rahmenbedingungen und √§u√üerliche Ressourcen einschlie√ülich k√∂rperlicher Bedingungen
‚Ä¢ psychische Prozesse (Gef√ºhle, motivationale Impulse und Gedanken)
‚Ä¢ beobachtbare Verhaltensweisen  
‚Ä¢ faktische Folgen bei Mitmenschen und mir selbst

Rekonstruiere anschlie√üend mithilfe des Textbausteins ‚ÄûTeufelskreislauf" den Teufelskreislauf meiner Coachingproblematik und entwickle Hypothesen √ºber den versteckten Gewinn.</div>
            </div>

            <div class="sender-toggle">
                <label>
                    <input type="radio" name="sender" value="coach" checked>
                    Als Coach senden
                </label>
                <label>
                    <input type="radio" name="sender" value="klient">
                    Als Klient senden
                </label>
            </div>

            <div id="statusIndicator" class="status-indicator status-connected">
                üü¢ Chat-System bereit
            </div>
        </div>

        <div class="main-content">
            <div class="chat-container">
                <div class="chat-header">
                    üí¨ Live Coaching Chat - Synchronisiert mit Klient Interface
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message system">
                        Coaching-Session gestartet. W√§hlen Sie eine Phase und beginnen Sie das strukturierte Coaching.
                    </div>
                </div>
                <div class="chat-input-container">
                    <textarea 
                        id="messageInput" 
                        class="chat-input" 
                        placeholder="Nachricht eingeben...">
                    </textarea>
                    <button onclick="sendMessage()">Senden</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const phaseInstructions = {
            1: {
                title: "Phase 1: Erste Erfassung der Soll-Ist-Situation",
                content: `
                <div class="coach-action">Coach begr√º√üt Coachingpartner, macht etwas Small Talk und teilt dann den Bildschirm, um Coachee das Konzept und Verfahren des KI-Coachings vorzustellen. Coach achtet dabei insbesondere auf den Aufbau einer positiven Arbeitsbeziehung.</div>
                
                <div class="coach-action">Coach regt Coachee an zu erz√§hlen, wie die aktuell unbefriedigende IST-Situation ist und wie er/sie sich die SOLL-Situation vorstellt. Coach beschr√§nkt sich dabei auf aktives Zuh√∂ren.</div>
                
                <p><strong>Protokoll-Template:</strong><br>
                "Ich habe folgendes Problem bzw. Coachingziel: [Coach fasst die Beschreibung der Ist- und Soll-Situation schriftlich zusammen. Fokus auf ‚ÄûSchl√ºsselsituation" und ‚ÄûSchl√ºsselaffekt".]"</p>

                <div class="gpt-prompt"><strong>GPT-Prompt f√ºr Phase 1:</strong>Erstelle einen in Ich-Form geschriebenen ‚Äûstrukturierten Bericht meiner Coachingproblematik", in dem alle obigen Informationen zusammengefasst sind. Gliedere diesen Bericht in zwei Teile: zun√§chst die IST-Situation und dann die gew√ºnschte SOLL-Situation.

Nimm in jedem der beiden Teile Bezug auf:
‚Ä¢ √§u√üere Rahmenbedingungen und √§u√üerliche Ressourcen einschlie√ülich k√∂rperlicher Bedingungen
‚Ä¢ psychische Prozesse (Gef√ºhle, motivationale Impulse und Gedanken)
‚Ä¢ beobachtbare Verhaltensweisen  
‚Ä¢ faktische Folgen bei Mitmenschen und mir selbst

Rekonstruiere anschlie√üend mithilfe des Textbausteins ‚ÄûTeufelskreislauf" den Teufelskreislauf meiner Coachingproblematik und entwickle Hypothesen √ºber den versteckten Gewinn.</div>`
            },
            2: {
                title: "Phase 2: Vertiefte Erfassung des ‚ÄûSchl√ºsselaffekts" mithilfe immersiver Bildarbeit",
                content: `
                <div class="coach-action">Coach gibt Coachee Raum, die Antwort der Coaching-KI auf sich wirken zu lassen und fragt, was die Antwort mit ihm/ihr innerlich macht und protokolliert die wichtigsten Aussagen.</div>
                
                <div class="coach-action">Coach erkl√§rt Coachee das weitere Vorgehen und zeigt ihm/ihr mit geteiltem Bildschirm mehrere Fotos mit der Bitte, dasjenige auszuw√§hlen, das am ehesten geeignet ist, den vorliegenden ‚ÄûSchl√ºsselaffekt" zu visualisieren.</div>
                
                <div class="coach-action">Coach f√ºhrt mit Coachee eine immersive Bildbetrachtung durch.</div>

                <p><strong>Protokoll-Template:</strong><br>
                "Vielen Dank f√ºr deine Ausf√ºhrungen. Sie haben in mir spontan Folgendes ausgel√∂st: [Coach protokolliert emotionale und kognitive Reaktionen]"</p>

                <div class="gpt-prompt"><strong>GPT-Prompt f√ºr Phase 2:</strong>Ich √ºbernehme deinen ‚Äûstrukturierten Bericht der IST- und SOLL-Situation" mit folgenden Modifikationen:
[√Ñnderungen einf√ºgen]

Ich habe f√ºr meinen ‚ÄûSchl√ºsselaffekt" ein passendes Bild ausgew√§hlt, das ich folgenderma√üen beschreibe:
[Ich habe das Bild gew√§hlt, weil xxx. Ich sehe auf dem Bild xxxx. Wenn ich erlebensm√§√üig in das Bild eintauche, dann xxxxx. Mein Blick richtet sich dabei vor allem auf xxxxx und ich h√∂re in mir die Worte: ‚Äûxxxxx".]

Sage mir, welche Bedeutung das gew√§hlte Bild f√ºr meine Coachingproblematik hat.</div>`
            },
            3: {
                title: "Phase 3: Vertiefte Erfassung des Coachingziels mithilfe immersiver Bildarbeit",
                content: `
                <div class="coach-action">Coach gibt Coachee Raum, die Antwort der Coaching-KI auf sich wirken zu lassen und fragt, was die Antwort mit ihm/ihr innerlich macht und protokolliert die wichtigsten Aussagen.</div>
                
                <div class="coach-action">Coach bietet Coachee mehrere Fotos f√ºr die Visualisierung seines Ziels an und f√ºhrt mit Coachee dann eine immersive Betrachtung dieses Bildes durch.</div>

                <div class="gpt-prompt"><strong>GPT-Prompt f√ºr Phase 3:</strong>Ich √ºbernehme deine pr√§zisierte Beschreibung des ‚ÄûSchl√ºsselaffekts" mit folgenden Modifikationen:
[Coach kopiert die GPT-Antwort und nimmt gew√ºnschte √Ñnderungen vor]

Ich habe auch f√ºr mein Coachingziel ein passendes Bild ausgew√§hlt, das ich folgenderma√üen beschreibe:
[Ich habe das Bild gew√§hlt, weil xxx. Ich sehe auf dem Bild xxx. Wenn ich erlebensm√§√üig in das Bild eintauche, dann xxx. Mein Blick richtet sich dabei vor allem auf xxx und ich h√∂re in mir die Worte: ‚Äûxxx."]

Sage mir, welche Bedeutung das gew√§hlte Bild f√ºr meine Coachingproblematik hat.</div>`
            },
            4: {
                title: "Phase 4: Rekonstruktion des ‚ÄûTeufelskreislaufs" mithilfe von Aufstellungsarbeit",
                content: `
                <div class="coach-action">Coach erkl√§rt Coachee das Konzept des ‚ÄûInneres Team" und des psychodramatischen Tiefeninterviews, das er mit Coachee dann durchf√ºhrt.</div>
                
                <div class="coach-action">Coach f√ºhrt mit Coachee das psychodramatische Tiefeninterview durch.</div>

                <div class="gpt-prompt"><strong>GPT-Prompt f√ºr Phase 4:</strong>Ich habe mit meinem Coach ein Tiefeninterview durchgef√ºhrt, das sich an dem Modell des Inneren Teams orientiert. Das Ziel des Interviews ist, mit Blick auf die ‚ÄûSchl√ºsselsituation" zu kl√§ren, welche meiner Pers√∂nlichkeitsanteile mein Coachingziel unterst√ºtzen und welche den ‚ÄûSchl√ºsselaffekt" verursachen.

[Coach f√ºgt das Transkript des Interviews in GPT ein.]

Gehe davon aus, dass die Spannungen zwischen den beiden Pers√∂nlichkeitsanteilen, die in dem transkribierten Tiefeninterview deutlich werden, den Kernbereich der vorliegenden Coachingproblematik ausleuchten.

Rekonstruiere mithilfe des Textbausteins ‚ÄûTeufelskreislauf" den problemstabilisierenden ‚ÄûTeufelskreislauf" der vorliegenden Coachingproblematik. Beziehe dich dabei zum einen auf das transkribierte Interview und zum anderen auf alle Einzelinformationen der vorliegenden Coachingproblematik.

Rekonstruiere den heimlichen Wunsch von mir, der mich ‚Äì ohne dass ich das wei√ü ‚Äì in meinem Teufelskreislauf gefangen h√§lt.</div>`
            },
            5: {
                title: "Phase 5: Rekonstruktion der zentralen Ausbalancierungsprobleme",
                content: `
                <div class="coach-action">Coach gibt Coachee Raum, die Antwort der Coaching-KI auf sich wirken zu lassen und fragt, was die Antwort mit ihm/ihr innerlich macht und protokolliert die wichtigsten Aussagen.</div>

                <div class="gpt-prompt"><strong>GPT-Prompt f√ºr Phase 5:</strong>Analysiere mithilfe des Textbausteins ‚ÄûAusbalancierungsprobleme" die Ausbalancierungsprobleme, d.h. die bisher noch zu wenig gest√§rkten Probleml√∂sungsorientierungen, die meine Coachingproblematik verursachen.

Sage mir mithilfe des Textbausteins ‚ÄûKomplement√§rkr√§fte", welche Komplement√§rkr√§fte ich st√§rken m√ºsste, um diese Ausbalancierungsprobleme besser auszubalancieren.</div>`
            },
            6: {
                title: "Phase 6: Entwicklung einer Erfolgsimagination",
                content: `
                <div class="coach-action">Coach gibt Coachee Raum, die Antwort der Coaching-KI auf sich wirken zu lassen und fragt, was die Antwort mit ihm/ihr innerlich macht und protokolliert die wichtigsten Aussagen.</div>

                <div class="gpt-prompt"><strong>GPT-Prompt f√ºr Phase 6:</strong>Gehe davon aus, dass es mir gelingt, meine Ausbalancierungsprobleme zu l√∂sen, indem ich die notwendigen Komplement√§rkr√§fte hinreichend st√§rke.

Beschreibe auf dieser Grundlage in Ich-Form eine Erfolgssituation, in der mir das besonders gut gelingt. Diese Beschreibung soll f√ºr mich die Funktion einer Erfolgsimagination haben.

Beschreibe in dieser Erfolgsimagination alles sehr differenziert, lebensnah und pers√∂nlich, und zwar so, dass man es sich so wie in einem Film ganz konkret vorstellen kann, also alles, was √§u√üerlich beobachtbar passiert, und alles, was intrapsychisch in mir passiert. Die Erlebenserz√§hlung startet mit der ‚ÄûSchl√ºsselsituation", die sich nicht ver√§ndert hat.

Nimm bei der Beschreibung der Erfolgsimagination auch Bezug auf die beiden Bilder, die ich f√ºr meine Ist- und Soll-Situation gew√§hlt habe.

Erstelle in diesem Sinne zwei deutlich unterschiedliche Erlebnisbeschreibungen als Anregungen f√ºr zwei deutlich unterschiedliche Erfolgsimaginationen.</div>`
            },
            7: {
                title: "Phase 7: Identifikation der n√§chsten zielf√ºhrenden Aktivit√§ten",
                content: `
                <div class="coach-action">Coach gibt Coachee Raum, die Antwort der Coaching-KI auf sich wirken zu lassen und fragt, was die Antwort mit ihm/ihr innerlich macht und protokolliert die wichtigsten Aussagen.</div>

                <div class="gpt-prompt"><strong>GPT-Prompt f√ºr Phase 7:</strong>Ich bevorzuge die folgende Erfolgsimagination mit folgenden Modifikationen und werde sie in den n√§chsten Tagen f√ºr mein Mentaltraining nutzen:
[Coach kopiert die gew√§hlte Fassung und nimmt die Ver√§nderungen vor, die Coachee w√ºnscht.]

In den n√§chsten Tagen will ich versuchen, diese Erfolgsimagination umzusetzen und die oben genannten Komplement√§rkr√§fte st√§rken.

Deshalb habe ich den Auftrag an dich, mit Bezug auf diese Absicht drei ‚Äì aber wirklich nur drei und nicht mehr ‚Äì geeignete Probleml√∂sungshandlungen mir anzubieten. Sie m√ºssen m√∂glichst konkret sein und eng an die vorliegenden Informationen zu meiner vorliegenden Coachingproblematik anschlie√üen.

Aufgrund deiner Anregungen plane ich f√ºr die n√§chsten Tage folgende Probleml√∂sungsaktivit√§ten:
[Coach protokolliert die Probleml√∂sungsaktivit√§ten des/der Coachee.]

Bitte speichere das ohne jeden Kommentar. Ich werde mich in den n√§chsten Tagen wieder melden und dir berichten, wie gut die Umsetzung war.</div>`
            },
            8: {
                title: "Phase 8: Umsetzungsunterst√ºtzung",
                content: `
                <div class="coach-action">Coach fragt Coachee nach den Umsetzungserfahrungen der geplanten Probleml√∂sungsaktivit√§ten und fokussiert dabei zun√§chst vor allem auf die Erfolge.</div>
                
                <div class="coach-action">Coach fragt Coachee nach den Umsetzungserfahrungen der geplanten Probleml√∂sungsaktivit√§ten und fokussiert dabei zun√§chst auf die Misserfolge.</div>

                <div class="gpt-prompt"><strong>GPT-Prompt f√ºr Phase 8:</strong>Bei der Umsetzung meiner geplanten Probleml√∂sungsaktivit√§ten habe ich folgendes Erfolgserlebnis gehabt:
[Coach protokolliert das wichtigste Erfolgserlebnis und kl√§rt dabei, was Coachee gemacht hat, um die oben genannten ‚ÄûKomplement√§rkr√§fte" zu st√§rken.]

Bei der Umsetzung meiner geplanten Probleml√∂sungsaktivit√§ten habe ich folgendes Misserfolgserlebnis gehabt:
[Coach protokolliert das wichtigste Misserfolgserlebnis des/der Coachee.]

Sage mir, was ich mit Blick auf meine Erfolgsimagination und - soweit vorhanden - mit Blick auf meine bisherigen Erfolge lernen kann, um demn√§chst in √§hnlichen Situationen erfolgreicher zu sein. Nutze dabei auch den Textbaustein ‚ÄûKomplement√§rkr√§fte".</div>`
            }
        };

        let chatMessages = [];
        let syncInterval;

        function updateInstructions() {
            const phaseSelect = document.getElementById('phaseSelect');
            const instructionsPanel = document.getElementById('instructionsPanel');
            const selectedPhase = phaseSelect.value;
            const instructions = phaseInstructions[selectedPhase];
            
            instructionsPanel.innerHTML = `
                <h3>${instructions.title}</h3>
                ${instructions.content}
            `;
        }

        function addMessage(sender, content, timestamp) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const time = timestamp ? new Date(timestamp).toLocaleTimeString('de-DE', {hour: '2-digit', minute: '2-digit'}) : new Date().toLocaleTimeString('de-DE', {hour: '2-digit', minute: '2-digit'});
            messageDiv.innerHTML = `
                <div>${content}</div>
                <small style="opacity: 0.7; font-size: 12px;">${time}</small>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const content = messageInput.value.trim();
            
            if (!content) return;
            
            const senderRadio = document.querySelector('input[name="sender"]:checked');
            const sender = senderRadio ? senderRadio.value : 'coach';
            
            // Nachricht lokal hinzuf√ºgen
            addMessage(sender, content);
            messageInput.value = '';
            
            // Simulate API call - in production w√ºrde hier der echte API-Call stehen
            updateStatus('connected');
        }

        function loadMessages() {
            // Simulate loading messages - w√ºrde in der Produktion echte API-Calls machen
            updateStatus('connected');
        }

        function updateStatus(status) {
            const statusIndicator = document.getElementById('statusIndicator');
            if (status === 'connected') {
                statusIndicator.className = 'status-indicator status-connected';
                statusIndicator.textContent = 'üü¢ Chat-System bereit';
            } else {
                statusIndicator.className = 'status-indicator status-error';
                statusIndicator.textContent = 'üî¥ Verbindungsfehler';
            }
        }

        function handleKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function startSync() {
            // In production w√ºrde hier das echte Sync-System starten
            updateStatus('connected');
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            updateInstructions();
            
            // Phase selector change event
            document.getElementById('phaseSelect').addEventListener('change', updateInstructions);
            
            // Message input keydown event
            document.getElementById('messageInput').addEventListener('keydown', handleKeyDown);
            
            startSync();
        });
    </script>
</body>
</html>